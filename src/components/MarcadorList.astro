---
import { Icon } from "astro-icon/components";
import type { CollectionEntry } from "astro:content";
import { slug } from "github-slugger";

interface Props {
  entries: CollectionEntry<"marcadores">[];
}
const { entries } = Astro.props;

function getHost(url: string): string {
  try {
    const u = new URL(url);
    let host = u.hostname.replace(/^www\./, "");
    return host;
  } catch {
    return "";
  }
}
---

<ul class="list-disc max-w-2xl w-full mx-auto">
  {
    entries.map((entry) => (
      <li class="">
        {/* prettier-ignore */}
        <a href={entry.data.url}>
            <span class="underline">{entry.data.title || entry.data.url}</span>
            <span class="text-neutral-500 dark:text-neutral-300">({getHost(entry.data.url)})</span>
            <Icon class="inline-block" name="eva:external-link-fill" />
          </a>
        <div>
          {entry.body.length > 0 && (
            <>
              {/* prettier-ignore */}
              <a class="text-neutral-500 dark:text-neutral-300 underline" href={`/marcadores/${entry.slug}`}>notas</a>
            </>
          )}
          {entry.data.tags && (
            <ul class="not-prose inline-flex gap-1 mx-auto justify-center leading-none">
              {entry.data.tags.map((tag) => (
                <li>
                  <a
                    href={`/marcadores/tags/${slug(tag)}`}
                    class="text-green-600 dark:text-green-300"
                  >
                    #{tag}
                  </a>
                </li>
              ))}
            </ul>
          )}
        </div>
      </li>
    ))
  }
</ul>
